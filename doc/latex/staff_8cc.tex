\hypertarget{staff_8cc}{}\section{src/autoscore/staff.cc File Reference}
\label{staff_8cc}\index{src/autoscore/staff.\+cc@{src/autoscore/staff.\+cc}}
{\ttfamily \#include $<$autoscore/staff.\+hh$>$}\\*
{\ttfamily \#include $<$autoscore/util.\+hh$>$}\\*
{\ttfamily \#include $<$tinyxml2.\+hh$>$}\\*
{\ttfamily \#include $<$map$>$}\\*
{\ttfamily \#include $<$thread$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
Include dependency graph for staff.\+cc\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{staff_8cc__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structanonymous__namespace_02staff_8cc_03_1_1RunLengthData}{anonymous\+\_\+namespace\{staff.\+cc\}\+::\+Run\+Length\+Data}
\item 
struct \hyperlink{structanonymous__namespace_02staff_8cc_03_1_1ConnectedComponent}{anonymous\+\_\+namespace\{staff.\+cc\}\+::\+Connected\+Component}
\item 
struct \hyperlink{structanonymous__namespace_02staff_8cc_03_1_1GradientData}{anonymous\+\_\+namespace\{staff.\+cc\}\+::\+Gradient\+Data}
\end{DoxyCompactItemize}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespaceanonymous__namespace_02staff_8cc_03}{anonymous\+\_\+namespace\{staff.\+cc\}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{staff_8cc_abf72175efb60132ac964e52aeb5f7c83}{B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL}~128
\item 
\#define \hyperlink{staff_8cc_a76d59f8c36ada225964995e650db5b66}{M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP}~10
\item 
\#define \hyperlink{staff_8cc_a88674420e534cbc53dd6a0a435b78df3}{K\+\_\+\+N\+E\+A\+R\+E\+ST}~5
\item 
\#define \hyperlink{staff_8cc_aae9a32fb4ed60a2b23dd7eca52e8e627}{K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE}~5
\item 
\#define \hyperlink{staff_8cc_ad4bd7dadb8ed3df5ec153534ad54ba94}{M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO}~0.\+75
\item 
\#define \hyperlink{staff_8cc_af9842f4040a0b015b015a7c7804adeff}{P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO}~0.\+6
\item 
\#define \hyperlink{staff_8cc_a7e54beaa2e3b43b0200ddb1cd5a3f8f0}{M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES}~10
\item 
\#define \hyperlink{staff_8cc_accb87656b6abb5b7cb82f10bd6e91ec4}{T\+H\+E\+T\+A\+\_\+\+R\+ES}~2
\item 
\#define \hyperlink{staff_8cc_a401f1cca6f833dfa7601f22db5431067}{N\+\_\+\+B\+I\+NS}~20
\item 
\#define \hyperlink{staff_8cc_af189f6fc2ab90b54e5551679f0385ff0}{L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF}~5
\item 
\#define \hyperlink{staff_8cc_ac5a945020d3528355cda82d383676736}{R\+A\+D2\+D\+EG}~180 / C\+V\+\_\+\+PI
\item 
\#define \hyperlink{staff_8cc_af7e8592d0a634bd3642e9fd508ea8022}{D\+E\+G2\+R\+AD}~1 / (\hyperlink{staff_8cc_ac5a945020d3528355cda82d383676736}{R\+A\+D2\+D\+EG})
\item 
\#define \hyperlink{staff_8cc_a002b2f4894492820fe708b1b7e7c5e70}{E\+P\+S\+I\+L\+ON}~1e-\/7
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a79495cf4f6a32aa51f293ed70e818804}{anonymous\+\_\+namespace\{staff.\+cc\}\+::is\+\_\+gray} (const cv\+::\+Mat \&src)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a57d06804211d80274cc40825db82bfcb}{anonymous\+\_\+namespace\{staff.\+cc\}\+::bounding\+\_\+box} (const cv\+::\+Mat \&src, cv\+::\+Mat \&dst)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a3568b86a70e0f8a3daec31a019eeb104}{anonymous\+\_\+namespace\{staff.\+cc\}\+::draw\+\_\+model} (cv\+::\+Mat \&dst, const \hyperlink{structStaffModel}{Staff\+Model} \&model, const int pos, const cv\+::\+Scalar color)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a9156ea35902498bfb94f9f22b8f4bf6e}{anonymous\+\_\+namespace\{staff.\+cc\}\+::rotate\+\_\+image} (cv\+::\+Mat \&dst, const double rot\+\_\+theta)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a5bdda2981a95b5eb6d486efc14676724}{anonymous\+\_\+namespace\{staff.\+cc\}\+::raw\+\_\+rotate} (cv\+::\+Mat \&dst, const double rot\+\_\+theta)
\item 
bool \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a63818cc0df79b80ab6ffcad5b63df63a}{anonymous\+\_\+namespace\{staff.\+cc\}\+::black\+\_\+on\+\_\+white} (const cv\+::\+Mat \&src)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a6e1c8cba88d76c900e8c838e6e97beb8}{anonymous\+\_\+namespace\{staff.\+cc\}\+::estimate\+\_\+rotation} (cv\+::\+Mat \&img, \hyperlink{structStaffModel}{Staff\+Model} \&model)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_ab0f140df81f62c7aa0f330a0a876b5cf}{anonymous\+\_\+namespace\{staff.\+cc\}\+::run\+\_\+length\+\_\+p} (struct Run\+Length\+Data \&data)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_afe2c1f1f40fd4b176293cdc981bdd6b9}{anonymous\+\_\+namespace\{staff.\+cc\}\+::run\+\_\+length} (const cv\+::\+Mat \&img, int \&staff\+\_\+height, int \&staff\+\_\+space, const int n\+\_\+threads)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a88b9ddc21068ab319b4e4366abb95a8b}{anonymous\+\_\+namespace\{staff.\+cc\}\+::remove\+\_\+glyphs} (cv\+::\+Mat \&staff\+\_\+image, const int staff\+\_\+height, const int staff\+\_\+space)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_af9ad599266f45cfd7cbd4108a1d15927}{anonymous\+\_\+namespace\{staff.\+cc\}\+::estimate\+\_\+gradient\+\_\+p} (struct Gradient\+Data \&data)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_ab397b0436cc25a1d1b61be4bd5be3c35}{anonymous\+\_\+namespace\{staff.\+cc\}\+::estimate\+\_\+gradient} (\hyperlink{structStaffModel}{Staff\+Model} \&model, const int n\+\_\+threads)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a5f56c8cd80f73838161c63d79eee1e80}{anonymous\+\_\+namespace\{staff.\+cc\}\+::interpolate\+\_\+model} (\hyperlink{structStaffModel}{Staff\+Model} \&model)
\item 
std\+::vector$<$ int $>$ \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_ab179502b6b6aa0bbe43936bac2f43411}{anonymous\+\_\+namespace\{staff.\+cc\}\+::poll\+\_\+lines} (const \hyperlink{structStaffModel}{Staff\+Model} \&model)
\item 
void \hyperlink{namespaceanonymous__namespace_02staff_8cc_03_a0a9d89aad47af23fc68cfb5600c4eb98}{anonymous\+\_\+namespace\{staff.\+cc\}\+::remove\+\_\+line} (cv\+::\+Mat \&dst, double line\+\_\+pos, const \hyperlink{structStaffModel}{Staff\+Model} \&model)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{staff.\+cc@{staff.\+cc}!B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL@{B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL}}
\index{B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL@{B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL}{BINARY_THRESH_VAL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define B\+I\+N\+A\+R\+Y\+\_\+\+T\+H\+R\+E\+S\+H\+\_\+\+V\+AL~128}\hypertarget{staff_8cc_abf72175efb60132ac964e52aeb5f7c83}{}\label{staff_8cc_abf72175efb60132ac964e52aeb5f7c83}


Definition at line 14 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!D\+E\+G2\+R\+AD@{D\+E\+G2\+R\+AD}}
\index{D\+E\+G2\+R\+AD@{D\+E\+G2\+R\+AD}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{D\+E\+G2\+R\+AD}{DEG2RAD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+E\+G2\+R\+AD~1 / ({\bf R\+A\+D2\+D\+EG})}\hypertarget{staff_8cc_af7e8592d0a634bd3642e9fd508ea8022}{}\label{staff_8cc_af7e8592d0a634bd3642e9fd508ea8022}


Definition at line 35 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!E\+P\+S\+I\+L\+ON@{E\+P\+S\+I\+L\+ON}}
\index{E\+P\+S\+I\+L\+ON@{E\+P\+S\+I\+L\+ON}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{E\+P\+S\+I\+L\+ON}{EPSILON}}]{\setlength{\rightskip}{0pt plus 5cm}\#define E\+P\+S\+I\+L\+ON~1e-\/7}\hypertarget{staff_8cc_a002b2f4894492820fe708b1b7e7c5e70}{}\label{staff_8cc_a002b2f4894492820fe708b1b7e7c5e70}


Definition at line 36 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!K\+\_\+\+N\+E\+A\+R\+E\+ST@{K\+\_\+\+N\+E\+A\+R\+E\+ST}}
\index{K\+\_\+\+N\+E\+A\+R\+E\+ST@{K\+\_\+\+N\+E\+A\+R\+E\+ST}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{K\+\_\+\+N\+E\+A\+R\+E\+ST}{K_NEAREST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define K\+\_\+\+N\+E\+A\+R\+E\+ST~5}\hypertarget{staff_8cc_a88674420e534cbc53dd6a0a435b78df3}{}\label{staff_8cc_a88674420e534cbc53dd6a0a435b78df3}


Definition at line 18 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE@{K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE}}
\index{K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE@{K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE}{KERNEL_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define K\+E\+R\+N\+E\+L\+\_\+\+S\+I\+ZE~5}\hypertarget{staff_8cc_aae9a32fb4ed60a2b23dd7eca52e8e627}{}\label{staff_8cc_aae9a32fb4ed60a2b23dd7eca52e8e627}


Definition at line 20 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF@{L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF}}
\index{L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF@{L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF}{LINES_PER_STAFF}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+I\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+FF~5}\hypertarget{staff_8cc_af189f6fc2ab90b54e5551679f0385ff0}{}\label{staff_8cc_af189f6fc2ab90b54e5551679f0385ff0}


Definition at line 33 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP@{M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP}}
\index{M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP@{M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP}{MIN_CONNECTED_COMP}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+I\+N\+\_\+\+C\+O\+N\+N\+E\+C\+T\+E\+D\+\_\+\+C\+O\+MP~10}\hypertarget{staff_8cc_a76d59f8c36ada225964995e650db5b66}{}\label{staff_8cc_a76d59f8c36ada225964995e650db5b66}


Definition at line 16 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES@{M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES}}
\index{M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES@{M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES}{MIN_HOUGH_LINES}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+I\+N\+\_\+\+H\+O\+U\+G\+H\+\_\+\+L\+I\+N\+ES~10}\hypertarget{staff_8cc_a7e54beaa2e3b43b0200ddb1cd5a3f8f0}{}\label{staff_8cc_a7e54beaa2e3b43b0200ddb1cd5a3f8f0}


Definition at line 26 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO@{M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO}}
\index{M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO@{M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO}{MIN_POLL_PER_LINE_RATIO}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+I\+N\+\_\+\+P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+L\+I\+N\+E\+\_\+\+R\+A\+T\+IO~0.\+75}\hypertarget{staff_8cc_ad4bd7dadb8ed3df5ec153534ad54ba94}{}\label{staff_8cc_ad4bd7dadb8ed3df5ec153534ad54ba94}


Definition at line 22 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!N\+\_\+\+B\+I\+NS@{N\+\_\+\+B\+I\+NS}}
\index{N\+\_\+\+B\+I\+NS@{N\+\_\+\+B\+I\+NS}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{N\+\_\+\+B\+I\+NS}{N_BINS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+\_\+\+B\+I\+NS~20}\hypertarget{staff_8cc_a401f1cca6f833dfa7601f22db5431067}{}\label{staff_8cc_a401f1cca6f833dfa7601f22db5431067}


Definition at line 30 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO@{P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO}}
\index{P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO@{P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO}{POLL_PER_STAFF_RATIO}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+O\+L\+L\+\_\+\+P\+E\+R\+\_\+\+S\+T\+A\+F\+F\+\_\+\+R\+A\+T\+IO~0.\+6}\hypertarget{staff_8cc_af9842f4040a0b015b015a7c7804adeff}{}\label{staff_8cc_af9842f4040a0b015b015a7c7804adeff}


Definition at line 24 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!R\+A\+D2\+D\+EG@{R\+A\+D2\+D\+EG}}
\index{R\+A\+D2\+D\+EG@{R\+A\+D2\+D\+EG}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{R\+A\+D2\+D\+EG}{RAD2DEG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+A\+D2\+D\+EG~180 / C\+V\+\_\+\+PI}\hypertarget{staff_8cc_ac5a945020d3528355cda82d383676736}{}\label{staff_8cc_ac5a945020d3528355cda82d383676736}


Definition at line 34 of file staff.\+cc.

\index{staff.\+cc@{staff.\+cc}!T\+H\+E\+T\+A\+\_\+\+R\+ES@{T\+H\+E\+T\+A\+\_\+\+R\+ES}}
\index{T\+H\+E\+T\+A\+\_\+\+R\+ES@{T\+H\+E\+T\+A\+\_\+\+R\+ES}!staff.\+cc@{staff.\+cc}}
\subsubsection[{\texorpdfstring{T\+H\+E\+T\+A\+\_\+\+R\+ES}{THETA_RES}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+H\+E\+T\+A\+\_\+\+R\+ES~2}\hypertarget{staff_8cc_accb87656b6abb5b7cb82f10bd6e91ec4}{}\label{staff_8cc_accb87656b6abb5b7cb82f10bd6e91ec4}


Definition at line 29 of file staff.\+cc.

